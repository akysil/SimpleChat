var app=angular.module("app",[]);app.config([function(){}]),app.run(["$rootScope",function(n){}]),app.directive("main",["socket","Source",function(n,t){return function(o){o.send=function(){n.emit("chat message",{username:o.username,message:o.message}),o.message=""},n.on("chat message",function(n){t.set(n)})}}]),app.directive("footer",["Source",function(n){return function(t){t.$watch(function(){return n.get()},function(n,o){t.list=n})}}]),app.controller("mainCtrl",["$scope",function(n){}]),app.factory("Source",["$http",function(n){var t,o={method:"GET",url:"/list.json"};return n(o).success(function(n,o,e,c){t=n}).error(function(n,o,e,c){console.log(o+": "+n),t=[{username:"Error",message:"Can not load messages"}]}),{get:function(){return t},set:function(n){t.push(n)}}}]),app.factory("socket",["$rootScope",function(n){var t=io.connect();return{on:function(o,e){t.on(o,function(){var o=arguments;n.$apply(function(){e.apply(t,o)})})},emit:function(o,e,c){t.emit(o,e,function(){var o=arguments;n.$apply(function(){c&&c.apply(t,o)})})}}}]);